\doxysection{gui.\+c}
\hypertarget{gui_8c_source}{}\label{gui_8c_source}\index{src/c/gui/gui.c@{src/c/gui/gui.c}}
\mbox{\hyperlink{gui_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00013}00013\ \textcolor{preprocessor}{\#include\ <tcl.h>}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00014}00014\ \textcolor{preprocessor}{\#include\ <tk.h>}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00015}00015\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00016}00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{set_8h}{./../set.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00017}00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gui_8h}{gui.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00018}00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{init_8h}{./../game/init.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00019}00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{game_8h}{./../game/game.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00020}00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{wall_8h}{./../game/wall.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00021}00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{random_8h}{./../Strategy/random.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00022}00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{strategy__tool_8h}{./../Strategy/strategy\_tool.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00023}00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{greedy_8h}{./../Strategy/greedy.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00024}00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{print__value_8h}{./../prog/print\_value.h}}"{}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00035}00035\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ proc(ClientData\ ClientData,\ Tcl\_Interp\ *interp,\ \textcolor{keywordtype}{int}\ argc,\ Tcl\_Obj\ *\textcolor{keyword}{const}\ argv[])\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00036}00036\ \ \ \ \ \textcolor{keywordflow}{if}(argc\ !=\ 2)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ *retmsg\ =\ \textcolor{stringliteral}{"{}argument:error"{}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ Tcl\_SetResult(interp,\ retmsg,\ TCL\_VOLATILE);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00039}00039\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}command:\ error\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00040}00040\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TCL\_ERROR;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00041}00041\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00042}00042\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00043}00043\ \ \ \ \ \textcolor{comment}{//\ 引数からデータを取り出す}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00044}00044\ \ \ \ \ \textcolor{keywordtype}{int}\ action\ =\ \mbox{\hyperlink{set_8h_a4ec2744aad7c39b26ee68b61c87f5220}{STAY}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00045}00045\ \ \ \ \ Tcl\_GetIntFromObj(interp,\ argv[1],\ \&action);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00046}00046\ \ \ \ \ \mbox{\hyperlink{struct_activity}{ACT}}\ activity;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00047}00047\ \ \ \ \ activity.\mbox{\hyperlink{struct_activity_ac765329451135abec74c45e1897abf26}{type}}\ =\ \mbox{\hyperlink{set_8h_a2acdc4aa0f128c9b2788707db3e6935e}{MOVE}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00048}00048\ \ \ \ \ activity.\mbox{\hyperlink{struct_activity_ae9ba364c0145d7a82155e034f355635f}{move}}\ =\ action;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00049}00049\ \ \ \ \ \textcolor{keywordtype}{int}\ *date\ =\ \mbox{\hyperlink{gui_8c_a0535b8637187c8866effe4f7369f8d40}{gui\_main}}(interp,\ activity);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00051}00051\ \ \ \ \ \textcolor{keywordtype}{int}\ *list\ =\ date;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00052}00052\ \ \ \ \ \textcolor{keywordflow}{if}(list\ ==\ NULL)\ printf(\textcolor{stringliteral}{"{}\(\backslash\)nyabai\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00053}00053\ \ \ \ \ Tcl\_Obj\ *listObj\ =\ Tcl\_NewListObj(0,\ NULL);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00054}00054\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00055}00055\ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(i,\ \mbox{\hyperlink{set_8h_a30b328ca499f27b3d0f8111b495834ca}{DATE}})\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00056}00056\ \ \ \ \ \ \ \ \ Tcl\_ListObjAppendElement(interp,\ listObj,\ Tcl\_NewIntObj(list[i]));}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00057}00057\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00059}00059\ \ \ \ \ Tcl\_SetObjResult(interp,\ listObj);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00061}00061\ \ \ \ \ \textcolor{keywordflow}{return}\ TCL\_OK;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00062}00062\ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00073}00073\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ proc\_init(ClientData\ ClientData,\ Tcl\_Interp\ *interp,\ \textcolor{keywordtype}{int}\ argc,\ Tcl\_Obj\ *\textcolor{keyword}{const}\ argv[])\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00074}00074\ \ \ \ \ \textcolor{keywordflow}{if}(argc\ !=\ 1)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ *retmsg\ =\ \textcolor{stringliteral}{"{}argument:error(init)"{}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00076}00076\ \ \ \ \ \ \ \ \ Tcl\_SetResult(interp,\ retmsg,\ TCL\_VOLATILE);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}command:\ error\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TCL\_ERROR;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00079}00079\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00080}00080\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00081}00081\ \ \ \ \ \textcolor{keywordtype}{int}\ data[\mbox{\hyperlink{set_8h_a30b328ca499f27b3d0f8111b495834ca}{DATE}}]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00082}00082\ \ \ \ \ \mbox{\hyperlink{struct_game_date}{GAME\_DATE}}\ game\_data;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00083}00083\ \ \ \ \ \mbox{\hyperlink{init_8c_aa0ebe7a80a7886951288e41439bd9ce5}{init}}(\&game\_data);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00084}00084\ \ \ \ \ \mbox{\hyperlink{gui_8c_acbf1fc7b7e24f2736178e5acefa95a11}{game\_conversion}}(game\_data,\ data);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00085}00085\ \ \ \ \ \textcolor{keywordtype}{int}\ *list\ =\ data;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00086}00086\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00087}00087\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00088}00088\ \ \ \ \ Tcl\_Obj\ *listObj\ =\ Tcl\_NewListObj(0,\ NULL);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00089}00089\ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(i,\ \mbox{\hyperlink{set_8h_a30b328ca499f27b3d0f8111b495834ca}{DATE}})\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ Tcl\_ListObjAppendElement(interp,\ listObj,\ Tcl\_NewIntObj(list[i]));}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00091}00091\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00093}00093\ \ \ \ \ Tcl\_SetObjResult(interp,\ listObj);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00095}00095\ \ \ \ \ \textcolor{keywordflow}{return}\ TCL\_OK;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00096}00096\ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00107}00107\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ proc\_createWall(ClientData\ ClientData,\ Tcl\_Interp\ *interp,\ \textcolor{keywordtype}{int}\ argc,\ Tcl\_Obj\ *\textcolor{keyword}{const}\ argv[])\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{if}(argc\ !=\ 3)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ *retmsg\ =\ \textcolor{stringliteral}{"{}argument:error(init)"{}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ Tcl\_SetResult(interp,\ retmsg,\ TCL\_VOLATILE);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}command:\ error\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TCL\_ERROR;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00113}00113\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00115}00115\ \ \ \ \ \textcolor{comment}{//\ 引数からデータを取り出す}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00116}00116\ \ \ \ \ \textcolor{keywordtype}{char}\ **wall\_data\ =\ (\textcolor{keywordtype}{char}**)malloc(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}*)\ *\ 10);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00117}00117\ \ \ \ \ \textcolor{keywordtype}{int}\ len\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00118}00118\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00119}00119\ \ \ \ \ printf(\textcolor{stringliteral}{"{}argv\ =\ \%s\(\backslash\)n"{}},\ argv[1]);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00120}00120\ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(i,\ 2)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ wall\_data[i]\ =\ Tcl\_GetStringFromObj(argv[i+1],\ \&len);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00122}00122\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00123}00123\ \ \ \ \ \mbox{\hyperlink{struct_activity}{ACT}}\ activity\ =\ \mbox{\hyperlink{wall_8c_acb13434e47e857e3800f64eb75ad91c5}{coordinate\_from\_tag\_name}}(wall\_data[0]);\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00124}00124\ \ \ \ \ activity.\mbox{\hyperlink{struct_activity_ac765329451135abec74c45e1897abf26}{type}}\ =\ \mbox{\hyperlink{set_8h_a4c6b87853cbaf189fe1e484706ae1875}{CREATE}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00125}00125\ \ \ \ \ \mbox{\hyperlink{gui_8c_a0535b8637187c8866effe4f7369f8d40}{gui\_main}}(interp,\ activity);\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00126}00126\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00127}00127\ \ \ \ \ \textcolor{keywordflow}{return}\ TCL\_OK;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00128}00128\ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00137}\mbox{\hyperlink{gui_8c_acbf1fc7b7e24f2736178e5acefa95a11}{00137}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gui_8c_acbf1fc7b7e24f2736178e5acefa95a11}{game\_conversion}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_game_date}{GAME\_DATE}}\ game\_date,\ \textcolor{keywordtype}{int}\ *date)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00138}00138\ \ \ \ \ \textcolor{keywordtype}{int}\ y,\ x;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00139}00139\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00140}00140\ \ \ \ \ date[0]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_aaefa47f4fdf865c2358c22b542a993e4}{turn}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00141}00141\ \ \ \ \ date[1]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_a74a2d6184f22f573b3b1c28db96e1c85}{main\_player}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00142}00142\ \ \ \ \ date[2]\ =\ \mbox{\hyperlink{set_8h_ab35a4d0b09725becad04719feaeb4204}{SUM\_CELL\_H}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00143}00143\ \ \ \ \ date[3]\ =\ \mbox{\hyperlink{set_8h_aafbd7073c46e2b8c686c35bb70b08116}{SUM\_CELL\_W}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00144}00144\ \ \ \ \ date[4]\ =\ \mbox{\hyperlink{set_8h_a76237eff655a402aff8063b131a37d45}{SUM\_PLAYER\_NUMBER}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00145}00145\ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(i,\ \mbox{\hyperlink{set_8h_a76237eff655a402aff8063b131a37d45}{SUM\_PLAYER\_NUMBER}})\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00146}00146\ \ \ \ \ \ \ \ \ date[i\ *\ 3\ +\ 5]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_ae96e06119c091b0428e3054a90c1f713}{player}}[i+1].\mbox{\hyperlink{struct_player_a5b6c2afb51c019c53ee73a16f7f012a1}{position}}.\mbox{\hyperlink{struct_point_a6150e0515f7202e2fb518f7206ed97dc}{x}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ date[i\ *\ 3\ +\ 6]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_ae96e06119c091b0428e3054a90c1f713}{player}}[i+1].\mbox{\hyperlink{struct_player_a5b6c2afb51c019c53ee73a16f7f012a1}{position}}.\mbox{\hyperlink{struct_point_a0a2f84ed7838f07779ae24c5a9086d33}{y}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ date[i\ *\ 3\ +\ 7]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_ae96e06119c091b0428e3054a90c1f713}{player}}[i+1].\mbox{\hyperlink{struct_player_a590ec5341899a975ef548c82605cb658}{wall\_num}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00149}00149\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00150}00150\ \ \ \ \ date[3\ *\ \mbox{\hyperlink{set_8h_a76237eff655a402aff8063b131a37d45}{SUM\_PLAYER\_NUMBER}}\ +\ 5]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_a6d7928635054e378da8fea2722146c00}{board}}.\mbox{\hyperlink{struct_board_a612c322c12531171d00039aba30a275a}{num\_wall}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00151}00151\ \ \ \ \ \textcolor{keywordtype}{int}\ num\ =\ 3\ *\ \mbox{\hyperlink{set_8h_a76237eff655a402aff8063b131a37d45}{SUM\_PLAYER\_NUMBER}}\ +\ 6;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00152}00152\ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(y,\ \mbox{\hyperlink{set_8h_ab35a4d0b09725becad04719feaeb4204}{SUM\_CELL\_H}}+1)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00153}00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(x,\ \mbox{\hyperlink{set_8h_aafbd7073c46e2b8c686c35bb70b08116}{SUM\_CELL\_W}})\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ date[num]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_a6d7928635054e378da8fea2722146c00}{board}}.\mbox{\hyperlink{struct_board_ae0f7d2f4684b0e19e1f4a347e3ff46a2}{wall\_h}}[y][x];}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ num++;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00157}00157\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00158}00158\ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(y,\ \mbox{\hyperlink{set_8h_ab35a4d0b09725becad04719feaeb4204}{SUM\_CELL\_H}})\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00159}00159\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{set_8h_afc28855f97302d38207feabfda45fc97}{rep}}(x,\ \mbox{\hyperlink{set_8h_aafbd7073c46e2b8c686c35bb70b08116}{SUM\_CELL\_W}}\ +\ 1)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ date[num]\ =\ game\_date.\mbox{\hyperlink{struct_game_date_a6d7928635054e378da8fea2722146c00}{board}}.\mbox{\hyperlink{struct_board_a5c4f26d29038f2cf492a36a08d4e6e62}{wall\_w}}[y][x];}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ num++;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00162}00162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00163}00163\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00164}00164\ \ \ \ \ date[num]\ =\ \mbox{\hyperlink{game_8c_a8700dfc16655e8e84138731f440fea48}{win\_or\_loss\_decision}}(game\_date);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00165}00165\ \ \ \ \ num++;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00166}00166\ \ \ \ \ \textcolor{keywordflow}{return}\ num;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00167}00167\ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00176}\mbox{\hyperlink{gui_8c_a0535b8637187c8866effe4f7369f8d40}{00176}}\ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{gui_8c_a0535b8637187c8866effe4f7369f8d40}{gui\_main}}(Tcl\_Interp\ *interp,\ \mbox{\hyperlink{struct_activity}{ACT}}\ activity)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00177}00177\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_game_date}{GAME\_DATE}}\ game\_date;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00178}00178\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ date[\mbox{\hyperlink{set_8h_a30b328ca499f27b3d0f8111b495834ca}{DATE}}]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00179}00179\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00180}00180\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ after\_flag\ =\ \mbox{\hyperlink{set_8h_a306ebd41c0cd1303b1372c6153f0caf8}{False}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00181}00181\ \ \ \ \ \mbox{\hyperlink{set_8h_a54d0fe08bae53a014d212153cad489ee}{ACT}}\ (*battlt)(\mbox{\hyperlink{set_8h_a666ee3310647bfcbc80dc10db790866e}{GAME\_DATE}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00182}00182\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00183}00183\ \ \ \ \ \textcolor{comment}{//\ 対戦相手の戦略を選択}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00184}00184\ \ \ \ \ battlt\ =\ \mbox{\hyperlink{greedy_8c_a1869328968b525fe9043cf207264eff7}{greedy}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00186}00186\ \ \ \ \ \textcolor{keywordflow}{if}(!count)}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00187}00187\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{init_8c_aa0ebe7a80a7886951288e41439bd9ce5}{init}}(\&game\_date);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00189}00189\ \ \ \ \ \textcolor{keywordflow}{if}(!\mbox{\hyperlink{game_8c_a12f3e530c2aa129d300511879650ea51}{end\_decision}}(game\_date))\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00190}00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(after\_flag)\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ game\_date.\mbox{\hyperlink{struct_game_date_a74a2d6184f22f573b3b1c28db96e1c85}{main\_player}}\ =\ \ \mbox{\hyperlink{set_8h_a1aa9974b5e7986619c487506d12adb50}{BLACK\_PLAYER}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ activity\ =\ battlt(game\_date);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ flag\ =\ \mbox{\hyperlink{game_8c_a441d4f282398c2c2cfe4d27151ef2d0d}{game\_main}}(\&game\_date,\ activity);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00194}00194\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(flag)\ after\_flag\ =\ \mbox{\hyperlink{set_8h_a306ebd41c0cd1303b1372c6153f0caf8}{False}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00195}00195\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ game\_date.\mbox{\hyperlink{struct_game_date_a74a2d6184f22f573b3b1c28db96e1c85}{main\_player}}\ =\ \mbox{\hyperlink{set_8h_a27d423ce517555d16c00a82c40806c25}{WHITE\_PLAYER}};}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ after\_flag\ =\ \mbox{\hyperlink{game_8c_a441d4f282398c2c2cfe4d27151ef2d0d}{game\_main}}(\&game\_date,\ activity);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00198}00198\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00199}00199\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00200}00200\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00201}00201\ \ \ \ \ \mbox{\hyperlink{struct_n_e_x_t___a_c_t_i_o_n}{NEXT\_ACTION}}\ next\_action\ =\ \mbox{\hyperlink{strategy__tool_8c_a562814235b58325637803d77642a986e}{all\_next\_action}}(game\_date,\ \mbox{\hyperlink{set_8h_a1aa9974b5e7986619c487506d12adb50}{BLACK\_PLAYER}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00202}00202\ \ \ \ \ \mbox{\hyperlink{strategy__tool_8c_acc0524cb732d561b0d38bdc9eb90f416}{calculate\_all\_next\_action}}(game\_date,\ \mbox{\hyperlink{set_8h_a1aa9974b5e7986619c487506d12adb50}{BLACK\_PLAYER}},\ \&next\_action);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00203}00203\ \ \ \ \ \mbox{\hyperlink{print__value_8c_a11e85aedd6fcb892b1ca772930ef47fb}{print\_next\_action}}(next\_action,\ \mbox{\hyperlink{set_8h_a1aa9974b5e7986619c487506d12adb50}{BLACK\_PLAYER}});}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00204}00204\ \ \ \ \ \mbox{\hyperlink{print__value_8c_a446b9b342d29629dc66c53240dfc4d20}{game\_data\_showTextFile}}(game\_date);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00205}00205\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00206}00206\ \ \ \ \ \textcolor{comment}{//\ if(game\_date.turn\ >=\ 10)\{}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00207}00207\ \ \ \ \ \textcolor{comment}{//\ int\ deep\ =\ shortest\_distance(game\_date,\ WHITE\_PLAYER);}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00208}00208\ \ \ \ \ \textcolor{comment}{//\ printf("{}deep\ =\ \%d\(\backslash\)n"{},\ deep);}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00209}00209\ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00210}00210\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00211}00211\ \ \ \ \ \mbox{\hyperlink{gui_8c_acbf1fc7b7e24f2736178e5acefa95a11}{game\_conversion}}(game\_date,\ date);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00212}00212\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00213}00213\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00214}00214\ \ \ \ \ count++;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00215}00215\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00216}00216\ \ \ \ \ Tcl\_CreateObjCommand(interp,\ \textcolor{stringliteral}{"{}game\_proc"{}},\ proc,\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00217}00217\ \ \ \ \ \textcolor{keywordflow}{return}\ date;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00218}00218\ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00219}00219\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00226}\mbox{\hyperlink{gui_8c_a3ce77eece6653ebcb6f1e59c36030b13}{00226}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{gui_8c_a3ce77eece6653ebcb6f1e59c36030b13}{gui}}()\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00228}00228\ \ \ \ \ \textcolor{comment}{//\ gui}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00229}00229\ \ \ \ \ Tcl\_Interp\ *interp\ =\ Tcl\_CreateInterp();\ \ \textcolor{comment}{//\ インタプリタを作成}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00230}00230\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00231}00231\ \ \ \ \ \textcolor{keywordflow}{if}(Tcl\_Init(interp)\ ==\ TCL\_ERROR)\{\ \ \ \textcolor{comment}{//\ tclを初期化（スタンダードライブラリinit.tclをロード）}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00232}00232\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *errmsg\ =\ Tcl\_GetStringResult(interp);\ \ \textcolor{comment}{//\ エラーメッセージを取得}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00233}00233\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Interpreter\ initialization\ fails\ :\ \%s\(\backslash\)n"{}},\ errmsg);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00234}00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00235}00235\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00236}00236\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00237}00237\ \ \ \ \ \textcolor{keywordflow}{if}(Tk\_Init(interp)\ ==\ TCL\_ERROR)\ \{\ \ \textcolor{comment}{//\ tkを初期化（ＧＵＩライブラリをロード）}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00238}00238\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *errmsg\ =\ Tcl\_GetStringResult(interp);\ \ \textcolor{comment}{//\ エラーメッセージを取得}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00239}00239\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}GUI\ initialization\ fails\ :\ \%s\(\backslash\)n\ "{}},\ errmsg);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00240}00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00241}00241\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00243}00243\ \ \ \ \ Tcl\_CreateObjCommand(interp,\ \textcolor{stringliteral}{"{}game\_init"{}},\ proc\_init,\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00244}00244\ \ \ \ \ Tcl\_CreateObjCommand(interp,\ \textcolor{stringliteral}{"{}game\_proc"{}},\ proc,\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00245}00245\ \ \ \ \ Tcl\_CreateObjCommand(interp,\ \textcolor{stringliteral}{"{}create\_wall"{}},\ proc\_createWall,\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00246}00246\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00247}00247\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00248}00248\ \ \ \ \ \textcolor{keywordflow}{if}(Tcl\_EvalFile(interp,\ \textcolor{stringliteral}{"{}c:/WallGame/src/c/gui/game.tcl"{}})\ ==\ TCL\_ERROR)\{\ \ \textcolor{comment}{//\ インタプリタを実行}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00249}00249\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *errmsg\ =\ Tcl\_GetStringResult(interp);\ \ \textcolor{comment}{//\ エラーメッセージを取得}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00250}00250\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Execution\ Failure:\ Error\ Description\ :\ \%s\(\backslash\)n"{}},\ errmsg);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00251}00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00252}00252\ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00253}00253\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *errmsg\ =\ Tcl\_GetStringResult(interp);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00254}00254\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}success!\ :\ \%s\(\backslash\)n"{}},\ errmsg);}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00255}00255\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00256}00256\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00257}00257\ \ \ \ \ Tk\_MainLoop();}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00258}00258\ \ \ \ \ Tcl\_DeleteInterp(interp);\ \ \textcolor{comment}{//\ インタプリタを片付ける}}
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00259}00259\ }
\DoxyCodeLine{\Hypertarget{gui_8c_source_l00260}00260\ \}}

\end{DoxyCode}
